<apex:page standardStylesheets="false" standardController="Case" extensions="WishJourneyController" sidebar="false" showHeader="false">
    <!--Start of Styles and Scripts-->    
    <apex:stylesheet value="{!URLFOR($Resource.wishcloudstyles, 'wishcloudstyles/core.css')}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.1.1/normalize.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.js"></script>
    <script>
    $(function() {
        var fname = $(".fnamechildwrap").text();
        var sname = $(".snamechildwrap").text();
        if(fname.length>10){
            $(".fnamechildwrap").text(fname.substring(0,10) + "...");
        }
        if(sname.length>10){
            $(".snamechildwrap").text(sname.substring(0,10) + "...");
        }
    });
    </script>
    <!--End of Styles and Scripts-->
    <style>
    .progressbar li.inactive .step .bar{background: #ffa500;background: -moz-linear-gradient(left, #ffa500 0%, #ffce75 100%);/* background: -webkit-gradient(linear, left top, right top, color-stop(0%, #ffe500), color-stop(100%, #ffce75)); *//* background: -webkit-linear-gradient(left, #ffe500 0%, #ffce75 100%); */background: -o-linear-gradient(left, #ffe500 0%, #ffce75 100%);background: -ms-linear-gradient(left, #ffe500 0%, #ffce75 100%);/* background: linear-gradient(to right, #ffe500 0%, #ffce75 100%); */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffe500', endColorstr='#ffce75',GradientType=1 );}
    .progressbar li.inactive .step:hover .detail:after { content: "INACTIVE"; }
    .progressbar li.inactive .step .bar > span:before { content: "DAYS"; position: absolute; font-size: .6em; top: -2%; right: 10%; }
    .progressbar li.inactive .step .bar > span:after { content: "Since Start"; position: absolute; font-size: 1.5rem; font-size: .8vw; top: 42%; right: 6%; border-top: 1px solid #fff; padding-top: 1%; }
    .progressbar li.inactive .step .bar > span { display: none; top: -50%; left: 0; font-size: 4rem; font-size: 2.3vw; font-weight: 100; color: #fff; text-transform: uppercase; padding-right: 40%; text-align: right; width: 100%; animation: fadein 1s ease 1, slideup .3s ease 1 forwards; }
    .progressbar li.inactive .step .bar:hover > span { display: block; }
    .progressbar li.inactive .step .bar:before { z-index: 1; }
    .progressbar li.inactive .step .sub-progress > div span {top:3px; background: #747678; animation: fadeinout 2s ease infinite; }
    </style>
    <div class="progress-wrap">     
      
        <div class="fnamewrap">
            <!--This is to show the Child name and Rushwish/Inactive/Onhold indications-->
            <div class="rush">
                <apex:outputpanel rendered="{!parentCaseID != null}"><a href="/{!parentCaseID}" target="_parent"><span class="fnamechildwrap">{!currCase.Contact.FirstName}</span> <span class="snamechildwrap">{!currCase.Contact.LastName}</span></a> </apex:outputPanel>
                <apex:outputpanel rendered="{!parentCaseID == null}"><a href="/{!currCase.id}" target="_parent"><span class="fnamechildwrap">{!currCase.Contact.FirstName}</span> <span class="snamechildwrap">{!currCase.Contact.LastName}</span></a> </apex:outputPanel>
                <apex:outputPanel rendered="{!rushwish == true}"><span class="rushwrap"></span></apex:outputPanel>
                <apex:outputPanel rendered="{!onHold == true}"><span class="onholdwrap">On Hold</span></apex:outputPanel>
              
                <apex:outputPanel rendered="{!escalated== true}"><span class="inactivewrap">Escalated</span></apex:outputPanel>
            </div>          
          
        </div>
        <br/><br/><br/>
        <div class="progressbarwrap">
            <ul class="progressbar">
                
                <!--Wish Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish'] == 'Completed' || caseWithStatusMap['Wish'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                            <span class="title">Wish</span>
                            <apex:outputPanel rendered="{!wishId != null}">
                                <a href="/{!wishId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-1"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!wishId == null}">
                                <div class="bar"><span id="step-bar-detail-1"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
               
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish'] == 'New' || caseWithStatusMap['Wish'] == 'Qualified' || caseWithStatusMap['Wish'] == 'Granted' || caseWithStatusMap['Wish'] == 'Ready to Assign' || caseWithStatusMap['Wish'] == 'Wish Determined' || caseWithStatusMap['Wish'] == 'On Hold')}">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Wish</span>
                              <apex:outputPanel rendered="{!wishId!= null}">
                                <a href="/{!wishId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                         <apex:outputLabel value="{!recordTypeWithDaysMap['Wish']}" rendered="{!recordTypeWithDaysMap['Wish'] != null}"/>
                                         <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish'] == null}"/> 
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                           
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                 <apex:outputPanel rendered="{!(caseWithStatusMap['Wish'] == 'Inactive')}">
                    <li class="inactive">
                        <div class="step">
                            <span class="title">Wish</span>
                              <apex:outputPanel rendered="{!wishId!= null}">
                                <a href="/{!wishId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                         <apex:outputLabel value="{!recordTypeWithDaysMap['Wish']}" rendered="{!recordTypeWithDaysMap['Wish'] != null}"/>
                                         <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish'] == null}"/> 
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                           
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Wish</span>
                            <apex:outputPanel rendered="{!wishId==null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>  
                
               <!--Wish Determination Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Determination'] == 'Completed' || caseWithStatusMap['Wish Determination'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                            <span class="title">Determination</span>
                            <apex:outputPanel rendered="{!determinationId != null}">
                                <a href="/{!determinationId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-3"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!determinationId == null}">
                                <div class="bar"><span id="step-bar-detail-3"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
               
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Determination'] != 'Completed' && caseWithStatusMap['Wish Determination'] != 'Closed' && caseWithStatusMap['Wish Determination'] != 'Not Started')}">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Determination</span>
                              <apex:outputPanel rendered="{!determinationId!= null}">
                                <a href="/{!determinationId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                           <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Determination']}" rendered="{!recordTypeWithDaysMap['Wish Determination'] != null}"/>
                                            <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Determination'] == null}"/>
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                           
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Determination'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Determination</span>
                            <apex:outputPanel rendered="{!determinationId== null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>    
                
                 <!--Wish planning Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Planning & Anticipation'] == 'Completed' || caseWithStatusMap['Wish Planning & Anticipation'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                            <span class="title">Anticipation</span>
                            <apex:outputPanel rendered="{!anticipationId != null}">
                                <a href="/{!anticipationId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-3"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!anticipationId == null}">
                                <div class="bar"><span id="step-bar-detail-3"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Planning & Anticipation'] != 'Completed' && caseWithStatusMap['Wish Planning & Anticipation'] != 'Closed' && caseWithStatusMap['Wish Planning & Anticipation'] != 'Not Started')}">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Anticipation</span>
                               <apex:outputPanel rendered="{!anticipationId != null}">
                                <a href="/{!anticipationId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                            <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Planning & Anticipation']}" rendered="{!recordTypeWithDaysMap['Wish Planning & Anticipation'] != null}"/>
                                            <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Planning & Anticipation'] == null}"/>
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!anticipationId == null}">
                                <div class="bar">
                                    <span id="step-bar-detail-1"> 
                                        <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Planning & Anticipation']}" rendered="{!recordTypeWithDaysMap['Wish Planning & Anticipation'] != null}"/>
                                        <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Planning & Anticipation'] == null}"/>
                                    </span>
                                </div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Planning & Anticipation'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Anticipation</span>
                            <apex:outputPanel rendered="{!anticipationId== null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                
                 <!--Wish Assist Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Assist'] == 'Completed' || caseWithStatusMap['Wish Assist'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                         
                            <apex:outputPanel rendered="{!anticipationId != null}">
                                <a href="/{!anticipationId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-3"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!anticipationId == null}">
                                <div class="bar"><span id="step-bar-detail-3"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Assist'] != 'Completed' && caseWithStatusMap['Wish Assist'] != 'Closed' && caseWithStatusMap['Wish Assist'] != 'Not Started') }">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Assist</span>
                     
                            <apex:outputPanel rendered="{!assitId!= null}">
                                <a href="/{!assitId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                         <!--   <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Assist']}" rendered="{!recordTypeWithDaysMap['Wish Assist'] != null}"/>
                                            <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Assist'] == null}"/> -->
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!assitId== null}">
                                <div class="bar">
                                    <span id="step-bar-detail-1"> 
                                        <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Assist']}" rendered="{!recordTypeWithDaysMap['Wish Assist'] != null}"/>
                                        <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Assist'] == null}"/>
                                    </span>
                                </div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Assist'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Assist</span>
                       
                            <apex:outputPanel rendered="{!assitId== null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                
                 <!--Wish Grant Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Granted'] == 'Completed' || caseWithStatusMap['Wish Granted'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                            <span class="title">Wish Grant</span>
                        
                            <apex:outputPanel rendered="{!grantId!= null}">
                                <a href="/{!grantId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-3"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!grantId == null}">
                                <div class="bar"><span id="step-bar-detail-3"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Granted'] != 'Completed' && caseWithStatusMap['Wish Granted'] != 'Closed' && caseWithStatusMap['Wish Granted'] != 'Not Started')}">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Wish Grant</span>
                     
                            <apex:outputPanel rendered="{!grantId!= null}">
                                <a href="/{!grantId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                            <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Granted']}" rendered="{!recordTypeWithDaysMap['Wish Granted'] != null}"/>
                                            <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Granted'] == null}"/>
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!grantId== null}">
                                <div class="bar">
                                    <span id="step-bar-detail-1"> 
                                        <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Granted']}" rendered="{!recordTypeWithDaysMap['Wish Granted'] != null}"/>
                                        <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Granted'] == null}"/>
                                    </span>
                                </div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                  <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Granted'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Wish Grant</span>
                     
                            <apex:outputPanel rendered="{!grantId!= null}">
                                <a href="/{!grantId}" target="_parent"><div class="bar"><span id="step-bar-detail-5"></span></div></a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!grantId== null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                  <!--Wish Effect Status Bar Logic-->
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Effect'] == 'Completed' || caseWithStatusMap['Wish Effect'] == 'Closed')}">
                    <li class="completed">
                        <div class="step">
                            <span class="title">Wish Effect</span>
                             <apex:outputPanel rendered="{!effectId!= null}">
                                <a href="/{!effectId}" target="_parent">
                                    <div class="bar"><span id="step-bar-detail-3"></span></div>
                                </a>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!effectId == null}">
                                <div class="bar"><span id="step-bar-detail-3"></span></div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Effect'] != 'Completed' && caseWithStatusMap['Wish Effect'] != 'Closed' && caseWithStatusMap['Wish Effect'] != 'Not Started')}">
                    <li class="in-progress">
                        <div class="step">
                            <span class="title">Wish Effect</span>
                     
                            <apex:outputPanel rendered="{!effectId != null}">
                                <a href="/{!effectId}" target="_parent">
                                    <div class="bar">
                                        <span id="step-bar-detail-1"> 
                                            <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Effect']}" rendered="{!recordTypeWithDaysMap['Wish Effect'] != null}"/>
                                            <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Effect'] == null}"/>
                                        </span>
                                    </div>
                                </a>  
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!effectId== null}">
                                <div class="bar">
                                    <span id="step-bar-detail-1"> 
                                        <apex:outputLabel value="{!recordTypeWithDaysMap['Wish Effect']}" rendered="{!recordTypeWithDaysMap['Wish Effect'] != null}"/>
                                        <apex:outputLabel value="0" rendered="{!recordTypeWithDaysMap['Wish Effect'] == null}"/>
                                    </span>
                                </div>
                            </apex:outputPanel>
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel> 
                <apex:outputPanel rendered="{!(caseWithStatusMap['Wish Effect'] == 'Not Started')}">
                    <li class="not-started">
                        <div class="step">
                            <span class="title">Wish Effect</span>
                            <apex:outputPanel rendered="{!effectId== null}">
                                <div class="bar"><span id="step-bar-detail-5"></span></div>
                            </apex:outputPanel>    
                            <span class="detail"></span>
                            <div class="sub-progress"><div><span></span></div></div>
                        </div>
                    </li>
                </apex:outputPanel>
           
            </ul>
        </div>
    </div>
</apex:page>
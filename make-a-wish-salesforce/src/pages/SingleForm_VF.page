<apex:page sidebar="false" applyBodyTag="false" cache="false" standardController="case" extensions="SingleParent_AC">
    <apex:stylesheet value="{!URLFOR($Resource.MakeAWishAmericaDesign, 'css/Liability.css')}" /> 
    <style>
        .custPopup, .custPopup-main-message{
        left: -42% !important;
        padding: 1.5rem;
        width: 70% !important;
        font-weight : bold;
        font-size : 120%;
        
        }
    </style>
    <apex:form id="singleForm">
        <apex:commandLink action="{!ReturnToWish}" value="Return to Wish" Style="float:right;padding:30px" html-data-toggle="modal" html-data-target="wffsame-alert"/>   
        <apex:outputPanel id="ReturntoWish">
            <apex:outputPanel rendered="{!displayReturnToWish}" layout="block">
                <div class="pop-wrap">
                    <div class="custPopup">
                        <div class="container">
                            <div class="row">
                                <div class="row" style="padding:10px">
                                    <div class="col-xs-12 col-sm-12 col-md-12">
                                        <center> Are you sure you want to exit ? </center>
                                    </div>
                                    
                                    <div class="col-xs-12 col-sm-12 col-md-12" style="margin-top:20px">
                                        <apex:commandButton value="Yes" styleClass="col-xs-12 col-sm-6 col-md-4 btn-md"  action="{!Cancel}" style="height: 2.75rem; margin-left: 2%;"/>
                                        <apex:commandButton value="No" styleClass="col-xs-12 col-sm-6 col-md-4 btn-md"  action="{!ReturnToSingleForm}"  style="height: 2.75rem; margin-left: 5%;"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </apex:outputPanel>
        </apex:outputPanel>
        <apex:messages />
        <apex:pageBlock title="Single Parent Form">
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Name:"/>
                    <apex:selectList value="{!recpName}" multiselect="false" size="1" styleClass="form-control multi sign" html-placeholder="Please Select All That Apply">
                        <apex:selectOptions value="{!RecpList}" />
                        <apex:actionSupport event="onchange" action="{!displayRelatedInfo}" reRender="singleForm"/>
                    </apex:selectList>   
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!IF(recpEmail != '' ,true,false)}">
                    <apex:outputLabel value="Email:"/>
                    <apex:outputText >{!recpEmail}</apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!IF(recpRelType != '' ,true,false)}">
                    <apex:outputLabel value="Relationship Type:" />
                    <apex:outputText >{!recpRelType}</apex:outputText>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            <apex:actionstatus id="counterStatus">
                <apex:facet name="start">
                    <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb; height:100%;opacity:0.65;width:100%;">
                        <div class="waitingHolder" style="top: 100px; width: 91px;">
                            <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                            <span class="waitingDescription">Loading...</span>
                        </div>
                    </div>
                </apex:facet>
            </apex:actionstatus>
            <apex:actionfunction action="{!CallouttoDocusign}" name="sendForSign" status="counterStatus"  reRender="singleForm">
            </apex:actionfunction>
        </apex:pageBlock>
        <center>
            <apex:commandButton value="Send Now" action="{!updateRelatedContact}" oncomplete="sendForSignature();"/>
            <apex:commandButton value="Cancel" action="{!Cancel}" />
        </center>
    </apex:form>
     <script>
    function sendForSignature() {
        sendForSign();
    }
    </script>
</apex:page>
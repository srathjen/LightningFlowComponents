<!--------------------------------------------------------------------------------------------------
CreatedBy: Kanagaraj 
Author   : MST Solutions
CreatedDate : 05/27/2016
Description : This VF page is placed as a Inline VF page of Non Wish & Event page layout. Here  chapter staff will enter
the roles and number of members in that role needed for that event. Once entered the value and hit [Save] button
It would create n number of Volunteer Opportunity records for that event.
---------------------------------------------------------------------------------------------------->
<apex:page StandardController="Non_Wish_Events__c" extensions="AddVolunteerRole_AC">
    <style>
        .tetable{
        width: 100%;
        }
        .tetable td{width:33%;border:0px;}
        .tetable1{
        width: 100%;
        }
       
    </style>
    <apex:form id="ref">
    <!----------------------------- New Row for Capturing volunteer opportunity count -------------->
        <apex:pageBlock id="membAdd" > 
            <apex:pageMessages id="showmsg"/>  
            <apex:outputPanel id="qq">
                <apex:outputPanel rendered="{!isnew}">
                    <apex:pageBlockTable value="{!addNewVolunteerRoleList}" var="memb">
                    <apex:column headerValue="Name">
                            <apex:outputField value="{!memb.Event_Name__c}"/>
                        </apex:column>
                        <apex:column headerValue="Chapter Role">
                            <apex:inputField value="{!memb.Chapter_Role__c}"/>
                        </apex:column>
                        <apex:column headerValue="Volunteer Needed" >
                            <apex:inputField value="{!memb.Volunteer_Need__c}"/>
                        </apex:column>
                          <apex:column headerValue="Description" >
                            <apex:inputField value="{!memb.Description__c}"/>
                        </apex:column>
                    </apex:pageBlockTable> 
                    <br/>
                </apex:outputPanel>  
            </apex:outputPanel>
            
      <!------------------ It will display Additional Row for capturing Volunteer opportunity Count ---->
            <apex:outputPanel rendered="{!inputmode}" >
                <table class='tetable list'>
                    <tr class='headerRow'>
                        <th> Name </th>
                        <th>Chapter Role</th>
                        <th>Role Name</th>
                        <th>Volunteer Needed</th>
                        <th>Description</th>
                        <th>Volunteer Registered</th></tr>
                    <apex:repeat value="{!volunteercountList}" var="memb">
                        <tr>
                            <td><apex:outPutField value="{!memb.Event_Name__c}"/></td>
                            <td><apex:outPutField value="{!memb.Chapter_Role__c}"/></td>
                            <td><apex:outputField value="{!memb.Hidden_Chapter_Name__c}"/></td>
                            <td><apex:outPutField value="{!memb.Volunteer_Needed__c}"/></td>
                            <td><apex:outPutField value="{!memb.Description__c}"/></td>
                            <td><apex:outPutField value="{!memb.Registered__c}"/></td>
                            
                        </tr>
                    </apex:repeat>
                
                    <apex:repeat value="{!addNewVolunteerRoleList}" var="memb1">
                        <tr>
                         
                           <td> <apex:outputField value="{!memb1.Event_Name__c}"/></td>
                            <td><apex:inputField value="{!memb1.Chapter_Role__c}"/></td>
                            <td></td>
                            <td><apex:inputField value="{!memb1.Volunteer_Need__c}"/></td>
                            <td><apex:inputField value="{!memb1.Description__c}"/></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </apex:repeat>
                </table>
            </apex:outputPanel>
         <!---------- Output Mode of the Record --------------------------------------->   
            <apex:outputPanel id="ss">
           
                <apex:outputPanel rendered="{!((outputmode) && (isActiveVolunteer == false))}">
                    <table class='tetable1 list'>
                        <tr class='headerRow'>
                            <th> Name </th>
                            <th>Chapter Role</th>
                            <th>Role Name</th>
                            <th>Volunteer Needed</th>
                            <th>Description</th>
                            <th>Volunteer Registered</th>
                            <th></th></tr>
                        <apex:repeat value="{!volunteercountList}" var="memb">
                            <tr>
                                <td> <apex:outputField value="{!memb.Event_Name__c}"/></td>
                                <td><apex:outPutField value="{!memb.Chapter_Role__c}"/></td>
                                <td><apex:outputField value="{!memb.Hidden_Chapter_Name__c}"/></td>
                                <td><apex:outPutField value="{!memb.Volunteer_Needed__c}"/></td>
                                <td><apex:outputField value="{!memb.Description__c}"/></td>
                                <td><apex:outPutField value="{!memb.Registered__c}"/></td>
                                <td>
                                    <apex:commandLink value="Register" action="{!register}" >
                                        <apex:param name="recId" value="{!memb.Chapter_Role__c}" assignTo="{!ChapterRoleId}"/>
                                    </apex:commandLink>
                                </td>
                            </tr>
                        </apex:repeat>
                    </table>
                    <br/>
                </apex:outputPanel>
              
                 <apex:outputPanel rendered="{!((outputmode) && (isActiveVolunteer == True))}">
                    <table class='tetable1 list'>
                        <tr class='headerRow'>
                            <th>Name</th>
                            <th>Chapter Role</th>
                            <th>Role Name</th>
                            <th>Volunteer Needed</th>
                            <th>Description</th>
                            <th>Volunteer Registered</th>
                            
                            <th></th></tr>
                        <apex:repeat value="{!volunteerCountWrapList}" var="memb">
                            <tr>
                           
                                <td><apex:outPutText value="{!memb.eventName }"/></td>
                                <td><apex:outPutText value="{!memb.chapterRole}"/></td>
                                <td><apex:outPutText value="{!memb.roleName}"/></td>
                                <td><apex:outPutText value="{!memb.volunteerNeeded}"/></td>
                                <td><apex:outPutText value="{!memb.description}"/></td>
                                <td><apex:outPutText value="{!memb.volunteerRegistration}"/></td>
                                <td>
                                    <apex:commandLink value="Register" action="{!register}">
                                        <apex:param name="recId" value="{!memb.recordId}" assignTo="{!ChapterRoleId}"/>
                                        <apex:param name="vcId" value="{!memb.volunteerCountId}" assignTo="{!CountId }"/>
                                    </apex:commandLink>
                                </td>
                            </tr>
                        </apex:repeat>
                    </table>
                    <br/>
                </apex:outputPanel>
            </apex:outputPanel>
             <!--------------------------- Edit Mode -------------------------->
            <apex:outputPanel >
                <apex:outputPanel rendered="{!isEdit}">
                    <apex:pageBlockTable value="{!volunteerCountToUpdateList}" var="memb">
                        <apex:column headerValue="Chapter Role">
                            <apex:inPutField value="{!memb.Chapter_Role__c}"/>
                        </apex:column>
                        <apex:column headerValue="Volunteer Needed">
                            <apex:inPutField value="{!memb.Volunteer_Needed__c}"/>
                        </apex:column>
                         <apex:column headerValue="Description">
                            <apex:inPutField value="{!memb.Description__c}"/>
                        </apex:column>
                    </apex:pageBlockTable> 
                    <br/>
                </apex:outputPanel>     
            </apex:outputPanel>
            <center><apex:commandButton value="Add Role" action="{!addRow}" rendered="{!(inputmode = true || outputmode = true || isnew = true) && (isCommunity != true)}"/> 
                <apex:commandButton value="Save Role" action="{!SaveRec}" oncomplete="window.top.location='/{!nonWishEvent.id}';return false" rendered="{!(isEdit = true || inputmode = true || addNewVolunteerRoleList.size > 0) && (isCommunity != true) }"/>
                <apex:commandButton value="Edit Role" action="{!EditRec}" rendered="{!outputmode = true && isCommunity != true}"/>
                <apex:commandButton value="Cancel"  onclick="window.top.location='/{!nonWishEvent.id}'; return false" rendered="{!(isEdit = true || inputmode = true || addNewVolunteerRoleList.size > 0) && (isCommunity != true)}"/>
                <apex:commandButton value="OK"  onclick="window.top.location='/{!nonWishEvent.id}'; return false" rendered="{!isReferesh = true }"/></center> 
        </apex:pageBlock>
    </apex:form> 
   
</apex:page>
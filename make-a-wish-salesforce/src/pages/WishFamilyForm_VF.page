<apex:page standardController="Case" extensions="WishChildForm_AC" id="wff" title="Wish Family Form | Make-A-Wish Communities" standardStylesheets="false" showHeader="false" applyHtmlTag="false" sidebar="false" docType="html-5.0" cache="false">
    <apex:include pageName="prospective_head" id="phead" />
    <!-- <apex:stylesheet value="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css"/> -->

    <body class="vcp vcpactivelogin" id="top">
        <apex:include pageName="active_header" id="pheaderActive" rendered="{!if($Profile.Name="Active Volunteer",true,false)}" />
        <apex:include pageName="wishFamilyForm_header_active" id="pheader" rendered="{!if($Profile.Name<>"Active Volunteer",true,false)}" />

        <main role="main" class="container">
            <div class="row">
                <section class="col-md-12">
                    <div class="row">
                        <h1 class="col-md-12">Wish Family</h1>
                    </div>
                    <apex:form id="frm">
                        <apex:actionFunction action="{!SaveandWishChildExit}" name="callConfirmSave" reRender="test,msg"/>
                        <apex:actionFunction action="{!withOutNavigate}" name="navigatWithoutSave" reRender="yyy,msg"/>
                        <apex:actionFunction action="{!BackToWCF}" name="SaveWishFFtoWishChild" reRender="hhh,msg"/>
                        <apex:actionFunction action="{!withOutSavetoChild}" name="WithOutSaveWFFtoChildForm" reRender="ggg,msg"/>
                        <apex:actionFunction action="{!WishFamilytoWishInfo}" name="SaveWishChildtoWInfo" reRender="ggghj,msg"/>
                        <apex:actionFunction action="{!withOutSavefromWCFtoWIF}" name="WithoutSaveChildFormToWIF" reRender="gggkk,msg"/>
                        <apex:actionFunction action="{!RetrunToWish}" name="ReturnToWish" reRender="qquuqq,msg"/>
                        <apex:actionFunction action="{!cancelfunction}" name="ReturnToWishWithOutSave" reRender="qqqqyuu,msg"/>
                        <apex:actionFunction action="{!generatePDF}" name="generatePDF" reRender="genPDF,msg"/>

                        <div class="step-base">
                            <span class="step-tether nav-down">
                                <nav>
                                    <ul class="step">
                                        <!--<li><apex:commandLink value="Wish Child" onclick="preventDefault();"  html-data-toggle="modal" html-data-target="#wcfee-alert" /></li>-->
                                        <li><apex:commandLink value="Wish Child" onclick="return false;" styleClass="wff-nav-wclink"/></li>
                                        <li><apex:commandLink value="Wish Family" styleClass="disabled current" />
                                            <ul class="anchor-links">
                                            </ul>
                                        </li>
                                        <!--<li><apex:commandLink value="Wish Information" onclick="preventDefault();"  html-data-toggle="modal" html-data-target="#wifsame-alert" /></li>-->
                                        <li><apex:commandLink value="Wish Information" onclick="return false;" styleClass="wff-nav-wilink"/></li>
                                    </ul>
                                    <div class="nav-sub-inner hidden-sm-down">
                                        <a href="#top" class="hidden-md-down">&uarr; Back to Top</a>
                                        <apex:Commandbutton value="Generate PDF" onClick="generat();" styleClass="btn-md generatePdf" reRender="msg" />
                                        <apex:commandbutton value="Save" onclick="return false;" action="{!SaveandwishFamilyExit}" styleClass="btn-md" html-data-toggle="modal" html-data-target="#save-alert" reRender="msg"/>
                                        <!--<apex:Commandbutton value="Next" onclick="return false;" action="{!WishFamilytoWishInfo}" styleClass="col-xs-12 btn-md" html-data-toggle="modal" html-data-target="#wifsame-alert" />-->
                                        <apex:Commandbutton value="Next" onclick="return false;" styleClass="col-xs-12 btn-md wff-nxt-btn"/>
                                    </div>
                                </nav>
                            </span>
                        </div>

                        <div class="messages"></div>
                        <div class="row">
                            <apex:actionFunction name="uiLogic" rerender="membAdd"/>
                            <apex:pageblock id="membAdd">

                                <div class="container" id="family-info">
                                  <fieldset>
                                  <apex:pageMessages id="msg"/>
                                        <legend>Wish Child</legend>
                                        <span class="info"> Fields in grey must be updated on Wish Child form and saved.</span>
                                        <div class="form-group row col-lg-6">
                                                <label class="col-sm-3" aria-labelledby="Child Name">Name</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.FirstName__c}"/>
                                                </div>
                                               </div>

                                            <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">Email</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputText value="{!currWishChild.Email__c}"/>
                                                </div>
                                               </div>

                                            <div class="form-group row col-lg-6">
                                                <label class="col-sm-3" aria-labelledby="Child Name"></label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.Middle_Name__c}"/>
                                                </div>
                                               </div>

                                              <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">RelationShip</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputText value="Wish Child (self)"/>
                                                </div>
                                               </div>

                                            <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name"></label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.LastName__c}"/>
                                                </div>
                                               </div>

                                              <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">DATE OF BIRTH</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.BirthDate__c}"/>
                                                </div>
                                               </div>

                                               <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">SHIRT SIZE</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.T_Shirt_Size__c}"/>
                                                </div>
                                               </div>

                                                <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">RESIDING WITH WISH CHILD</label>
                                                <div class="col-sm-9 text-muted">
                                                    <apex:outputField value="{!currWishChild.Residing_With_Wish_Child__c}"/>
                                                </div>
                                               </div>
                                                <div class="form-group row col-lg-6">
                                               <label class="col-sm-3" aria-labelledby="Child Name">REQUESTED PARTICIPANT</label>
                                                <div class="col-sm-9 text-muted">
                                                <label class="c-input c-checkbox" style="color:#747678; font-family:'Lato', Arial, sans-serif; text-transform:none">
                                                   <!-- <apex:InputText value="{!currWishChild.Hidden_Same_as_Family__c}"/>-->
                                                   <apex:inputCheckbox value="{!currWishChild.Hidden_Same_as_Family__c}" id="same-pg" styleClass="fam-part-cb" selected="true" rendered="{!currWishChild.id == Null}"/>
                                                   <apex:inputCheckbox value="{!currWishChild.Hidden_Same_as_Family__c}" id="same-pg1" styleClass="fam-part-cb" rendered="{!currWishChild.id != Null}" />

                                                   <span class="c-indicator" style="top:-.2rem; border:1px solid #ccc"></span>
                                                 </label>
                                                </div>
                                               </div>
                                    </fieldset>

                                    <apex:outputpanel id="parentInfo">
                                        <div class="parent-info">
                                            <apex:variable value="{!0}" var="cnt"/>
                                            <apex:repeat value="{!wcfUtil.wishFamilyWrapList}" var="wishFamilContact" id="ParentList">
                                                <fieldset class="connected-haslegend fadein-alert">
                                                    <legend>Parent/Legal Guardian {!cnt+1}</legend>
                                                    <span class="info">Please fill the fields below. For the Parent/Legal Guardian to electronically sign the forms, ensure the name, date of birth, and email are completed for each individual.</span>
                                                    <apex:commandlink immediate="true" action="{!removeFamily}" reRender="membAdd,uiLogic" styleClass="text-muted remove-block">
                                                        - Remove
                                                        <apex:param name="index" value="{!cnt}"/>
                                                    </apex:commandlink>
                                                    <script type="text/javascript">
                                                    listSize = {!cnt};
                                                    </script>
                                                    <apex:variable var="cnt" value="{!cnt+1}"/>
                                                    <div class="col-lg-6">
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label for="wff:frm:relationship-fc" aria-label="relationship">Relationship<span style="font-size: 150%" class="red"> *</span></label></div>
                                                            <div class="col-sm-6">
                                                                <apex:selectList value="{!wishFamilContact.Relationship}" id="relationship-fc" multiselect="false" size="1" styleClass="form-control col-xs-12 col-sm-12 c-select relationship">
                                                                    <apex:selectOption itemlabel="Please Select" itemValue=""/>
                                                                    <apex:selectOptions value="{!wcfUtil.ParentGuardianRelationships}" />
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label class="firstname" aria-labelledby="first_name">Name<span style="font-size: 150%" class="red"> *</span></label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.firstName}" styleClass="form-control firstname" html-placeholder="First Name" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label class="sr-only" aria-label="Middle Name">Middle Name</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.MiddleName}" styleclass="form-control" html-placeholder="Middle Name (optional)" />
                                                            </div>
                                                            <div class="col-sm-3 sr-only"><i class="text-muted">Optional</i></div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4">
                                                                <label class="sr-only" aria-label="last_name">Last Name</label>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.lastName}" styleClass="form-control lastname" html-placeholder="Last Name" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-label="Date of Birth">Date of Birth<span style="font-size: 150%" class="red"> *</span></label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.dob}" styleClass="form-control date-input numbers-only dob" html-placeholder="mm/dd/yyyy" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-labelledby="Residing with Wish Child">Residing with Wish Child<span style="font-size: 150%" class="red"> *</span></label></div>
                                                            <div class="col-sm-6">
                                                                <apex:selectList value="{!wishFamilContact.residingWishMedical}" multiselect="false" size="1" styleClass="form-control c-select required" >
                                                                  <apex:selectOption itemlabel="Please Select" itemValue=""/>
                                                                  <apex:selectOption itemlabel="Yes" itemValue="Yes" />
                                                                  <apex:selectOption itemlabel="No" itemValue="No" />
                                                                </apex:selectList>
                                                            </div>
                                                        </div>


                                                        <span class="fam-part-fields"><!-- sr-only -->
                                                          <div class="form-group row">
                                                              <div class="col-xs-12 col-sm-4"><label aria-labelledby="Shirt Size">Shirt Size</label></div>
                                                              <div class="col-sm-6">
                                                                  <apex:inputText value="{!wishFamilContact.tshirtSize}" styleClass="form-control" html-placeholder="small, medium, large" />
                                                              </div>
                                                          </div>
                                                        </span>

                                                       <div class="form-group row">
                                                          <div class="col-xs-12 col-sm-4"><label aria-labelledby="Add Guardian as participant">Requested Participant</label></div>
                                                          <div class="col-sm-6">
                                                            <label class="c-input c-checkbox" style="color:#747678; font-family:'Lato', Arial, sans-serif; text-transform:none">
                                                            <!--  <input type="checkbox" id="same-pg" class="fam-part-cb" /> -->
                                                              <!-- <apex:inputCheckbox value="" id="same-pg" styleClass="fam-part-cb"></apex:inputCheckbox> -->
                                                               <apex:inputCheckbox value="{!wishFamilContact.sameParentGuardianFlag}" id="same-pg" styleClass="fam-part-cb">
                                                              <!-- <apex:actionSupport action="{!SameAsFamily}" event="onchange" reRender="membAdd,uiLogic" /> -->
                                                               </apex:inputCheckbox>
                                                              <span class="c-indicator" style="top:-.2rem; border:1px solid #ccc"></span>
                                                              Yes
                                                            </label>
                                                          </div>
                                                        </div>

                                                    </div>

                                                    <div class="col-lg-6">
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label for="wcf:frm:street" aria-labelledby="street">Address <apex:outputText rendered="{!cnt==1}"><font color="red" style="font-size:140%"> *</font></apex:outputText></label> </div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.Street}" styleClass="form-control name-group address" html-placeholder="0000 NE 00 Ave"  />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label for="wcf:frm:city" class="sr-only" aria-labelledby="city">City</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.City}" styleClass="form-control name-group city" html-placeholder="City"  />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label for="wcf:frm:state" class="sr-only" aria-labelledby="state">State</label></div>
                                                            <div class="col-xs-12 col-sm-6">
                                                                <apex:selectList value="{!wishFamilContact.State}" styleClass="form-control col-xs-12 col-sm-12 c-select state" size="1" >
                                                                    <apex:selectOptions value="{!wcfUtil.states}" />
                                                                </apex:selectList>
                                                                <span class="errorMsg"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4">
                                                                <label for="wcf:frm:postalcode" class="sr-only" aria-labelledby="postalcode">Postal Code</label>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.PostalCode}" styleClass="form-control postalcode numbers-only" html-placeholder="00000-0000" maxlength="10" html-minlength="5" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-labelledby="email_address">Email</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.Email}"  maxlength="50" styleClass="form-control" html-placeholder="your_email@domain.com" />
                                                                <span class="errorMsg"></span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                          <!-- <div class="col-xs-12 col-sm-4"></div> -->
                                                          <div class="col-sm-12"><span class="info" style="display:inline; margin:0"></span><label style="font-size:9.5px;" aria-labelledby="Either Home, Work or Mobile Phone is required below">Either Home, Work or Mobile Phone is required below<span style="font-size: 160%" class="red"> *</span></label></div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-labelledby="Home Phone">Home</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.homeTelephone}" styleClass="form-control numbers-only phone phone-group" maxlength="14" html-placeholder="(000) 000-0000" html-type="tel" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-labelledby="Home Phone">Work</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.workTelephone}" styleClass="form-control numbers-only phone phone-group" maxlength="14" html-placeholder="(000) 000-0000" html-type="tel" />
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <div class="col-xs-12 col-sm-4"><label aria-labelledby="Home Phone">Mobile</label></div>
                                                            <div class="col-sm-6">
                                                                <apex:inputText value="{!wishFamilContact.mobileTelephone}" styleClass="form-control numbers-only phone phone-group" maxlength="14" html-placeholder="(000) 000-0000" html-type="tel" />
                                                            </div>
                                                        </div>
                                                      </div>
                                                </fieldset>
                                            </apex:repeat>
                                        </div>
                                    </apex:outputpanel>

                                    <fieldset class="connected">
                                        <div class="form-group row">
                                            <div class="col-md-12"><apex:commandLink value="+ Add Parent/Legal Guardian" action="{!addFamily}" styleClass="text-muted" reRender="membAdd,uiLogic" /></div>
                                        </div>
                                    </fieldset>

                                    <fieldset>
                                        <legend>Additional Requested Wish Participants</legend>
                                           <span class="info">Please list the legal names and relevant information for all requested participants requested by the wish child.
                                            <br/><i>Note:</i> Make-A-Wish cannot guarantee the participation of any individual(s) listed below.<br/><br/>
                                            Information provided, and saved, in this section will populate throughout the forms. All requested wish participants, over the age of 18, must provide an email address if electronically signing the Make-A-Wish Liability &amp; Publicity Release Form.</span>
                                        <!-- <div class="form-group row" style="padding:0 1rem">
                                            <label class="c-input c-checkbox" for="wff:frm:membAdd:same-pg" style="color:#747678">
                                                <apex:inputCheckbox value="{!wcfUtil.sameParentGuardian}" id="same-pg">
                                                    <apex:actionSupport action="{!SameAsFamily}" event="onchange" reRender="membAdd,uiLogic" />
                                                </apex:inputCheckbox>
                                                <span class="c-indicator" style="top:-.2rem; border:1px solid #ccc"></span>
                                                Add all Parent/Guardians to participant list
                                            </label>
                                        </div> -->

                                        <apex:pageBlock id="newPart">
                                            <div id="participantsInfo">
                                                <apex:variable value="{!0}" var="part"/>
                                                <apex:repeat value="{!wcfUtil.wishParticipantList}" var="wishFamilContact" id="participant">
                                                    <fieldset class="connected-haslegend fadein-alert" style="border-bottom:none">
                                                        <legend>Participant {!part+1}</legend>
                                                        <!-- - Remove Contact -->
                                                        <apex:commandlink id="link" value="- Remove" immediate="true" action="{!removeParticipants}" reRender="membAdd,uiLogic" styleClass="text-muted remove-block">
                                                            <apex:param name="Participant" value="{!part}"/>
                                                        </apex:commandlink>
                                                        <apex:variable var="part" value="{!part+1}"/>
                                                        <div class="col-lg-6">
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label aria-label="relationship">Relationship<span style="font-size: 150%" class="red"> *</span></label></div>
                                                                <div class="col-sm-6">
                                                                    <apex:selectList value="{!wishFamilContact.Relationship}" multiselect="false" size="1"  styleClass="form-control col-xs-12 col-sm-12 c-select partRelation{!part} relationship">
                                                                        <apex:selectOption itemlabel="Please Select" itemValue=""/>
                                                                        <apex:selectOptions value="{!wcfUtil.ParticipantRelationships}" />
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label class="firstname" aria-labelledby="first_name">Name<span style="font-size: 150%" class="red"> *</span></label></div>
                                                                <div class="col-sm-6">
                                                                    <apex:inputText value="{!wishFamilContact.FirstName}" styleClass="form-control firstname partFName{!part}" maxlength="50" html-placeholder="First Name" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label class="sr-only" aria-label="Middle Name">Middle Name</label></div>
                                                                <div class="col-sm-6">
                                                                    <apex:inputText value="{!wishFamilContact.MiddleName}" styleclass="form-control" maxlength="50" html-placeholder="Middle Name (optional)" />
                                                                </div>
                                                                <div class="col-sm-3 sr-only"><i class="text-muted">Optional</i></div>
                                                            </div>

                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4">
                                                                    <label class="col-xs-12 col-sm-4 sr-only" aria-label="last_name">Last Name</label>
                                                                </div>
                                                                <div class="col-sm-6 lastname">
                                                                    <apex:inputText value="{!wishFamilContact.LastName}" styleClass="form-control lastname partLName{!part}" maxlength="50" html-placeholder="Last Name" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4">
                                                                    <label aria-label="Date of Birth">Date of Birth<span style="font-size: 150%" class="red"> *</span></label>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <apex:inputText value="{!wishFamilContact.dob}" styleClass="form-control dob date-input part-dob" maxlength="50" html-placeholder="mm/dd/yyyy" />
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-6">
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label aria-labelledby="email_address">Email</label></div>
                                                                <div class="col-sm-6">
                                                                    <apex:inputText value="{!wishFamilContact.Email}" styleClass="form-control emailValue" maxlength="50" html-placeholder="participant_email@domain.com" />

                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label aria-labelledby="Shirt Size">Shirt Size</label></div>
                                                                <div class="col-sm-6">

                                                                    <apex:inputText value="{!wishFamilContact.tshirtSize}" styleClass="form-control tShirt-{!part}" html-placeholder="small, medium, large" />
                                                                </div>
                                                            </div>


                                                            <div class="form-group row">
                                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:mobile-phone-part" aria-labelledby="Residing with Wish Child">Residing with Wish Child <span style="font-size: 150%" class="red"> *</span></label>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <apex:selectList value="{!wishFamilContact.residingWishMedical}" multiselect="false" size="1" styleClass="form-control c-select partRelation{!part} required" >
                                                                       <apex:selectOption itemlabel="Please Select" itemValue=""/>
                                                                        <apex:selectOption itemlabel="Yes" itemValue="Yes" />
                                                                        <apex:selectOption itemlabel="No" itemValue="No" />
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </fieldset>
                                                </apex:repeat>
                                            </div>
                                        </apex:pageBlock>
                                    </fieldset>

                                    <fieldset class="connected">
                                        <div class="form-group row">
                                            <div class="col-md-12"><apex:commandLink value="+ Add Participants" action="{!addParticipants}" styleClass="text-muted" reRender="membAdd,uiLogic" /></div>
                                        </div>
                                    </fieldset>

                                    <fieldset id="emergency-contact">
                                        <legend>Non-Participating Adult Emergency Contact</legend>
                                        <span class="info">Please fill the fields below.</span>
                                        <div class="col-lg-6">
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:relationship-np-ec" aria-label="relationship">Relationship<span style="font-size: 150%" class="red"> *</span></label></div>
                                                <div class="col-sm-6">
                                                    <apex:selectList value="{!currWishChild.Emergency_Relationship__c}" id="relationship-np-ec" multiselect="false" size="1" styleClass="form-control col-xs-12 col-sm-12 c-select relationship">
                                                        <apex:selectOption itemlabel="Please Select" itemValue=""/>
                                                        <apex:selectOptions value="{!wcfUtil.Relationships}" />
                                                    </apex:selectList>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:firstname-np-ec" class="firstname" aria-labelledby="first_name">Name<span style="font-size: 150%" class="red"> *</span></label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!currWishChild.Emergency_First_Name__c}" id="firstname-np-ec" styleClass="form-control firstname" maxlength="50" html-placeholder="First Name" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:middleinitial-np-ec" class="sr-only" aria-label="Middle Name">Middle Name</label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!currWishChild.Emergency_Middle_Name__c}" id="middlename-np-ec" styleclass="form-control" maxlength="50" html-placeholder="Middle Name (optional)" />
                                                </div>
                                                <div class="col-sm-3 sr-only"><i class="text-muted">Optional</i></div>
                                            </div>

                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4">
                                                    <label for="wff:frm:lastname-np-ec" class="sr-only" aria-label="last_name">Last Name</label>
                                                </div>
                                                <div class="col-sm-6 lastname">
                                                    <apex:inputText value="{!currWishChild.Emergency_Last_Name__c}" id="lastname-np-ec" styleClass="form-control lastname" maxlength="50" html-placeholder="Last Name" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-lg-6">
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:emailaddress-fc" aria-labelledby="email_address">Email Address</label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!currWishChild.Emergency_Email__c}" styleClass="form-control " maxlength="50" id="emailaddress-fc" html-placeholder="your_email@domain.com (optional)" />
                                                    <span class="errorMsg"></span>
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:phone-np-ec" aria-labelledby="Phone">Phone<span style="font-size: 150%" class="red"> *</span></label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!currWishChild.Emergency_Mobilephone__c}" styleClass="form-control phone numbers-only phone-chk" maxlength="14" id="phone-np-ec" html-placeholder="(000) 000-0000" html-type="tel" />
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset id="prior-wish">
                                        <legend>Prior Wish Information</legend>
                                        <span class="info">Please fill the fields below.</span>
                                        <div class="col-lg-6">
                                            <div class="form-group row">
                                                <div class="col-xs-12"><label for="wff:frm:prior-wish" aria-labelledby="prior wish">Has your child ever had a wish granted or been considered by Make-A-WishÂ® or any other wish-granting organization?<span style="font-size: 150%" class="red"> *</span></label></div>
                                                <div class="col-xs-12 col-sm-6">
                                                    <apex:inputField value="{!currWishChild.Already_wish_granted_by_MAW_Other_Org__c}" id="prior-wish" styleClass="form-control col-xs-12 col-sm-12 c-select f-prior-wish required"/>
                                                </div>
                                            </div>
                                            <div class="form-group sr-only row prior-details">
                                                <div class="col-xs-12"><label for="wff:frm:prior-details" aria-labelledby="prior details">Please indicate the organizations name, the wish, and the date it was or will be granted.</label></div>
                                                <div class="col-sm-10 col-lg-12">
                                                    <apex:inputTextarea styleClass="form-control prior-textarea Yes" id="prior-details" value="{!currWishChild.If_yes_Enter_Org_Name_Wish_Date_it_wa__c}" html-placeholder="Please enter prior wish details" />
                                                    <span class="text-muted" style="display:inline-block; line-height:1rem">A wish with another organization may not be pursued prior to completion of a Make-A-Wish experience.</span>
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <div class="col-xs-12"><label for="wff:frm:social-media" aria-labelledby="prior wish">Make-A-Wish would like to stay connected through social media. If interested, please provide contact information for each site on which you are active.</label></div>
                                                <div class="col-sm-10 col-lg-12">
                                                    <apex:inputTextarea value="{!currWishChild.Social_Media_Link__c}" id="social-media" styleClass="form-control col-xs-12 col-sm-12 f-social-media" html-placeholder="twitter.com/user, facebook.com/user, instagram.com/user, etc." />
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset>
                                        <legend>Wish Granter Information</legend>
                                        <span class="info">Names of Make-A-Wish representatives assisting in the completion of this form.</span>
                                        <div class="col-lg-6">
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:wish-granter-1" aria-labelledby="Wish Granter's name">Wish Granter 1</label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!wcfUtil.caseTeamMemberNo1}" id="wish-granter-1" styleClass="form-control granter" html-placeholder="Full Name" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-xs-12 col-sm-4"><label for="wff:frm:wish-granter-2" aria-labelledby="Wish Granter's name">Wish Granter 2</label></div>
                                                <div class="col-sm-6">
                                                    <apex:inputText value="{!wcfUtil.caseTeamMemberNo2}" id="wish-granter-2" styleClass="form-control granter" html-placeholder="Full Name" />
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <!-- end /conatiner -->

                            </apex:pageblock>

                            <apex:outputPanel id="uiLogic">
                                <script>

                                setIntervalX(function () {
                                    commonjs();
                                    uiLogic();
                                    clearNavList();
                                    setWaypoint(); // update
                                    // setting a delay in order for other scripts to load first on pageload
                                }, 300, 3);
                                </script>
                            </apex:outputPanel>

                        </div>

                        <div class="row hidden-sm-up nav-btm">
                            <nav class="btm">
                                <ul>
                                    <!-- <li><apex:Commandbutton value="Prev" action="{!BackToWCF}" styleClass="col-xs-12 btn-md" html-data-toggle="modal" html-data-target="#page-exit-alert" /></li> -->
                                    <li><apex:commandbutton value="Save" onclick="return false;" action="{!SaveandwishFamilyExit}" styleClass="btn-md" html-data-toggle="modal" html-data-target="#save-alert" reRender="msg"/></li>
                                    <li><apex:Commandbutton value="Generate PDF" styleClass="btn-md generatePdf" reRender="msg"/></li>
                                    <li><apex:Commandbutton value="Next" onclick="return false;" action="{!WishFamilytoWishInfo}" styleClass="col-xs-12 btn-md" html-data-toggle="modal" html-data-target="#wifsame-alert" reRender="msg"/></li>
                                </ul>
                            </nav>
                        </div>

                        <!-- wif modal -->
                        <div class="modal fade" id="wifsame-alert" tabindex="-1" role="dialog" aria-labelledby="Exit Form" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title" id="exit-form">Leaving Form</h1>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p class="text-muted col-xs-12" style="text-align:center">You may save your progress before leaving this form.</p>
                                    </div>
                                    <div class="modal-footer">
                                        <apex:commandButton onclick="test1();" value="Save" styleClass="btn-md" reRender="ssss"/>
                                        <apex:commandButton action="{!withOutSavefromWCFtoWIF}"  value="Navigate without Saving" styleClass="btn-md" style="margin-left:1px" reRender="jjj,msg" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- wcf modal -->
                        <div class="modal fade" id="wcfee-alert" tabindex="-1" role="dialog" aria-labelledby="Exit Form" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title" id="exit-form">Leaving Form</h1>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p class="text-muted col-xs-12" style="text-align:center">You may save your progress before leaving this form.</p>
                                    </div>
                                    <div class="modal-footer">
                                        <apex:commandButton onclick="test3();" value="Save" styleClass="btn-md" reRender="jjj" />
                                        <apex:commandButton action="{!withOutSavetoChild}"  value="Navigate without Saving" styleClass="btn-md" style="margin-left:1px" reRender="jjj,msg"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </apex:form>
                </section>
            </div>
        </main>
        <apex:include pageName="WishFamilyForm_footer" id="pfooter" />
        <script>

        function uiLogic(){
            $(".multi").chosen({placeholder_text_multiple: "Please select all that apply", width:"100%"});

            //show textarea fields on pageload if "Yes" was selected
            // if ($('.f-prior-wish').val() != null){
            //   if ($('.f-prior-wish').val().indexOf('Yes') != -1){
            //     $('.prior-details').removeClass('sr-only');
            //     $('.prior-textarea').addClass('required');
            //   }
            // }
            // show/hide if "Yes" textbox
            $('.f-prior-wish').on('change', function() {
              if($(this).val() != null){
                if ($(this).val().indexOf('Yes') != -1){
                  $('.prior-details').removeClass('sr-only');
                  $('.prior-textarea').addClass('required');
                } else {
                  $('.prior-details').addClass('sr-only');
                  $('.prior-textarea').val('').removeClass('required');
                }
              }
            }).change();

            function famPart(){
              $('.fam-part-cb').each(function(){
                var target = $(this).parents('.form-group').next('.fam-part-fields');
                if ($(this)[0].checked){
                  // target.removeClass('sr-only');
                  target.find('input').addClass('required').attr('small, medium, large');
                } else {
                  // target.addClass('sr-only');
                  target.find('input').removeClass('required').attr('small, medium, large (optional)');
                }
              });
            } famPart();

            $('.fam-part-cb').on('click', function(){
              famPart();
            });

            $(".date-input").datepicker({
                autoclose: true,
                changeYear: true,
                yearRange: "c-80:c",
                endDate: '+2d',
                minDate: '-100Y',
                onSelect: function() {
                  $(this).valid();
                  emailReqPart();
                }
            });

            // add email class(makes field required) if participant is 18 years or older
            function emailReqPart(){
              $('.part-dob').each(function(){
                // vars required for years calculation
                var dateDob = $(this).val();
                    today = new Date(),
                    birthDate = new Date(dateDob),
                    oneDay = 24 * 60 * 60 * 1000,
                    diffDays = Math.round(Math.abs((today.getTime() - birthDate.getTime()) / (oneDay)));
                    console.log('participant email required');

                // older than 18 (365days x 18years = 6570)
                if (diffDays >= 6570){
                  $(this).parents('.col-lg-6').next('.col-lg-6').find('.emailValue').addClass('email');
                } else {
                  $(this).parents('.col-lg-6').next('.col-lg-6').find('.emailValue').removeClass('email');
                }
              })
            } emailReqPart();


            //$('.tShirt-1').prop('readonly', true);
            // "residing wish child: change to yes as default only on 1st participant"
           // $('.partRelation1').find('option[value="Yes"]').prop('selected', true);//.change();
            //$('.partRelation1').attr('title','').css('cursor','not-allowed');

            // on final submit, run validation on pageload
            setIntervalX(function () {
              (function(){
                var topLoc = top.location.href,
                  urlWFFRequired = /^(http[s]?:\/\/.*\/WishFamilyForm_VF?).*(&required=true)$/i.test(topLoc);
                if (urlWFFRequired){
                  $('#wff\\:frm').valid()
                }
              })()
            }, 1250, 1)
        } uiLogic();

        function test1(){
            // if ($('#wff\\:frm').valid()){
            // console.log('form submitted');
            SaveWishChildtoWInfo();
            // } else {
            $('#wifsame-alert').modal('hide');
            // }
        }
        function test3(){
            // if ($('#wff\\:frm').valid()){
            // console.log('form submitted');
            SaveWishFFtoWishChild();
            // } else {
            $('#wcfee-alert').modal('hide');
            // }
        }

        function generat(){
             generatePDF();}


        </script>
    </body>
</apex:page>